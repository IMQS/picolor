/*

*/
(function() {
  var t, E, x, k, e, q, w, P, N, u, v, y, A, l, J, G, H, B, D, C, I, Q, R, S, O, T, K, U, z, F, L, M;
  e = function(a, b, c, d) {
    return new t(a, b, c, d);
  };
  "undefined" !== typeof module && null !== module && null != module.exports && (module.exports = e);
  "function" === typeof define && define.amd ? define([], function() {
    return e;
  }) : (U = "undefined" !== typeof exports && null !== exports ? exports : this, U.chroma = e);
  e.color = function(a, b, c, d) {
    return new t(a, b, c, d);
  };
  e.hsl = function(a, b, c, d) {
    return new t(a, b, c, d, "hsl");
  };
  e.hsv = function(a, b, c, d) {
    return new t(a, b, c, d, "hsv");
  };
  e.rgb = function(a, b, c, d) {
    return new t(a, b, c, d, "rgb");
  };
  e.hex = function(a) {
    return new t(a);
  };
  e.css = function(a) {
    return new t(a);
  };
  e.lab = function(a, b, c) {
    return new t(a, b, c, "lab");
  };
  e.lch = function(a, b, c) {
    return new t(a, b, c, "lch");
  };
  e.hsi = function(a, b, c) {
    return new t(a, b, c, "hsi");
  };
  e.gl = function(a, b, c, d) {
    return new t(255 * a, 255 * b, 255 * c, d, "gl");
  };
  e.interpolate = function(a, b, c, d) {
    if (null == a || null == b) {
      return "#000";
    }
    "string" === z(a) && (a = new t(a));
    "string" === z(b) && (b = new t(b));
    return a.interpolate(c, b, d);
  };
  e.mix = e.interpolate;
  e.contrast = function(a, b) {
    var c, d;
    "string" === z(a) && (a = new t(a));
    "string" === z(b) && (b = new t(b));
    c = a.luminance();
    d = b.luminance();
    return c > d ? (c + 0.05) / (d + 0.05) : (d + 0.05) / (c + 0.05);
  };
  e.luminance = function(a) {
    return e(a).luminance();
  };
  e.lch2rgb = function(a, b, c) {
    return H(a, b, c);
  };
  e._Color = t;
  t = function() {
    function a() {
      var a, c, d, f, g, h, e, m, p, s;
      d = [];
      m = 0;
      for (p = arguments.length;m < p;m++) {
        c = arguments[m], null != c && d.push(c);
      }
      if (0 === d.length) {
        s = [255, 0, 255, 1, "rgb"], g = s[0], h = s[1], e = s[2], a = s[3], f = s[4];
      } else {
        if ("array" === z(d[0])) {
          if (3 === d[0].length) {
            e = d[0], g = e[0], h = e[1], e = e[2], a = 1;
          } else {
            if (4 === d[0].length) {
              a = d[0], g = a[0], h = a[1], e = a[2], a = a[3];
            } else {
              throw "unknown input argument";
            }
          }
          f = null != (s = d[1]) ? s : "rgb";
        } else {
          "string" === z(d[0]) ? (g = d[0], f = "hex") : "object" === z(d[0]) ? (s = d[0]._rgb, g = s[0], h = s[1], e = s[2], a = s[3], f = "rgb") : 3 <= d.length && (g = d[0], h = d[1], e = d[2]);
        }
      }
      3 === d.length ? (f = "rgb", a = 1) : 4 === d.length ? "string" === z(d[3]) ? (f = d[3], a = 1) : "number" === z(d[3]) && (f = "rgb", a = d[3]) : 5 === d.length && (a = d[3], f = d[4]);
      null == a && (a = 1);
      "rgb" === f ? this._rgb = [g, h, e, a] : "gl" === f ? this._rgb = [255 * g, 255 * h, 255 * e, a] : "hsl" === f ? (this._rgb = v(g, h, e), this._rgb[3] = a) : "hsv" === f ? (this._rgb = y(g, h, e), this._rgb[3] = a) : "hex" === f ? this._rgb = N(g) : "lab" === f ? (this._rgb = l(g, h, e), this._rgb[3] = a) : "lch" === f ? (this._rgb = H(g, h, e), this._rgb[3] = a) : "hsi" === f && (this._rgb = u(g, h, e), this._rgb[3] = a);
      q(this._rgb);
    }
    a.prototype.rgb = function() {
      return this._rgb.slice(0, 3);
    };
    a.prototype.rgba = function() {
      return this._rgb;
    };
    a.prototype.hex = function() {
      return I(this._rgb);
    };
    a.prototype.toString = function() {
      return this.name();
    };
    a.prototype.hsl = function() {
      return R(this._rgb);
    };
    a.prototype.hsv = function() {
      return S(this._rgb);
    };
    a.prototype.lab = function() {
      return O(this._rgb);
    };
    a.prototype.lch = function() {
      return T(this._rgb);
    };
    a.prototype.hsi = function() {
      return Q(this._rgb);
    };
    a.prototype.gl = function() {
      return[this._rgb[0] / 255, this._rgb[1] / 255, this._rgb[2] / 255, this._rgb[3]];
    };
    a.prototype.luminance = function(b, c) {
      var d, f, g;
      null == c && (c = "rgb");
      if (!arguments.length) {
        return D(this._rgb);
      }
      0 === b && (this._rgb = [0, 0, 0, this._rgb[3]]);
      1 === b && (this._rgb = [255, 255, 255, this._rgb[3]]);
      d = D(this._rgb);
      f = 20;
      g = function(a, d) {
        var e, p;
        p = a.interpolate(0.5, d, c);
        e = p.luminance();
        return 1E-7 > Math.abs(b - e) || !f-- ? p : e > b ? g(a, p) : g(p, d);
      };
      this._rgb = (d > b ? g(new a("black"), this) : g(this, new a("white"))).rgba();
      return this;
    };
    a.prototype.name = function() {
      var a, c;
      a = this.hex();
      for (c in e.colors) {
        if (a === e.colors[c]) {
          return c;
        }
      }
      return a;
    };
    a.prototype.alpha = function(a) {
      return arguments.length ? (this._rgb[3] = a, this) : this._rgb[3];
    };
    a.prototype.css = function(a) {
      var c, d, f;
      null == a && (a = "rgb");
      d = this._rgb;
      3 === a.length && 1 > d[3] && (a += "a");
      if ("rgb" === a) {
        return a + "(" + d.slice(0, 3).map(Math.round).join(",") + ")";
      }
      if ("rgba" === a) {
        return a + "(" + d.slice(0, 3).map(Math.round).join(",") + "," + d[3] + ")";
      }
      if ("hsl" === a || "hsla" === a) {
        return c = this.hsl(), f = function(a) {
          return Math.round(100 * a) / 100;
        }, c[0] = f(c[0]), c[1] = f(100 * c[1]) + "%", c[2] = f(100 * c[2]) + "%", 4 === a.length && (c[3] = d[3]), a + "(" + c.join(",") + ")";
      }
    };
    a.prototype.interpolate = function(b, c, d) {
      var f, g, e, r, m, p, s, n;
      null == d && (d = "rgb");
      "string" === z(c) && (c = new a(c));
      if ("hsl" === d || "hsv" === d || "lch" === d || "hsi" === d) {
        "hsl" === d ? (r = this.hsl(), n = c.hsl()) : "hsv" === d ? (r = this.hsv(), n = c.hsv()) : "hsi" === d ? (r = this.hsi(), n = c.hsi()) : "lch" === d && (r = this.lch(), n = c.lch()), "h" === d.substr(0, 1) ? (f = r[0], p = r[1], e = r[2], g = n[0], s = n[1], r = n[2]) : (e = r[0], p = r[1], f = r[2], r = n[0], s = n[1], g = n[2]), isNaN(f) || isNaN(g) ? isNaN(f) ? isNaN(g) ? f = Number.NaN : (f = g, 1 !== e && 0 !== e || "hsv" === d || (m = s)) : 1 !== r && 0 !== r || "hsv" === d || (m = 
        p) : f += b * (g > f && 180 < g - f ? g - (f + 360) : g < f && 180 < f - g ? g + 360 - f : g - f), null == m && (m = p + b * (s - p)), e += b * (r - e), d = "h" === d.substr(0, 1) ? new a(f, m, e, d) : new a(e, m, f, d);
      } else {
        if ("rgb" === d) {
          r = this._rgb, n = c._rgb, d = new a(r[0] + b * (n[0] - r[0]), r[1] + b * (n[1] - r[1]), r[2] + b * (n[2] - r[2]), d);
        } else {
          if ("lab" === d) {
            r = this.lab(), n = c.lab(), d = new a(r[0] + b * (n[0] - r[0]), r[1] + b * (n[1] - r[1]), r[2] + b * (n[2] - r[2]), d);
          } else {
            throw "color mode " + d + " is not supported";
          }
        }
      }
      d.alpha(this.alpha() + b * (c.alpha() - this.alpha()));
      return d;
    };
    a.prototype.premultiply = function() {
      var a, c;
      c = this.rgb();
      a = this.alpha();
      return e(c[0] * a, c[1] * a, c[2] * a, a);
    };
    a.prototype.darken = function(a) {
      var c;
      null == a && (a = 20);
      c = this.lch();
      c[0] -= a;
      return e.lch(c).alpha(this.alpha());
    };
    a.prototype.darker = function(a) {
      return this.darken(a);
    };
    a.prototype.brighten = function(a) {
      null == a && (a = 20);
      return this.darken(-a);
    };
    a.prototype.brighter = function(a) {
      return this.brighten(a);
    };
    a.prototype.saturate = function(a) {
      var c;
      null == a && (a = 20);
      c = this.lch();
      c[1] += a;
      return e.lch(c).alpha(this.alpha());
    };
    a.prototype.desaturate = function(a) {
      null == a && (a = 20);
      return this.saturate(-a);
    };
    return a;
  }();
  q = function(a) {
    for (var b in a) {
      3 > b ? (0 > a[b] && (a[b] = 0), 255 < a[b] && (a[b] = 255)) : 3 === b && (0 > a[b] && (a[b] = 0), 1 < a[b] && (a[b] = 1));
    }
    return a;
  };
  P = function(a) {
    var b, c;
    a = a.toLowerCase();
    if (null != e.colors && e.colors[a]) {
      return N(e.colors[a]);
    }
    if (c = a.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)) {
      b = c.slice(1, 4);
      for (c = a = 0;2 >= a;c = ++a) {
        b[c] = +b[c];
      }
      b[3] = 1;
    } else {
      if (c = a.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/)) {
        for (b = c.slice(1, 5), c = a = 0;3 >= a;c = ++a) {
          b[c] = +b[c];
        }
      } else {
        if (c = a.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)) {
          b = c.slice(1, 4);
          for (c = a = 0;2 >= a;c = ++a) {
            b[c] = Math.round(2.55 * b[c]);
          }
          b[3] = 1;
        } else {
          if (c = a.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)) {
            b = c.slice(1, 5);
            for (c = a = 0;2 >= a;c = ++a) {
              b[c] = Math.round(2.55 * b[c]);
            }
            b[3] = +b[3];
          } else {
            if (c = a.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)) {
              b = c.slice(1, 4), b[1] *= 0.01, b[2] *= 0.01, b = v(b), b[3] = 1;
            } else {
              if (c = a.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)) {
                b = c.slice(1, 4), b[1] *= 0.01, b[2] *= 0.01, b = v(b), b[3] = +c[4];
              }
            }
          }
        }
      }
    }
    return b;
  };
  N = function(a) {
    var b;
    if (a.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {
      if (4 === a.length || 7 === a.length) {
        a = a.substr(1);
      }
      3 === a.length && (a = a.split(""), a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
      a = parseInt(a, 16);
      return[a >> 16, a >> 8 & 255, a & 255, 1];
    }
    if (a.match(/^#?([A-Fa-f0-9]{8})$/)) {
      return 9 === a.length && (a = a.substr(1)), a = parseInt(a, 16), [a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255];
    }
    if (b = P(a)) {
      return b;
    }
    throw "unknown color: " + a;
  };
  u = function(a, b, c) {
    var d, f, e;
    d = F(arguments);
    a = d[0];
    b = d[1];
    c = d[2];
    a /= 360;
    a < 1 / 3 ? (d = (1 - b) / 3, e = (1 + b * w(x * a) / w(E - x * a)) / 3, f = 1 - (d + e)) : a < 2 / 3 ? (a -= 1 / 3, e = (1 - b) / 3, f = (1 + b * w(x * a) / w(E - x * a)) / 3, d = 1 - (e + f)) : (a -= 2 / 3, f = (1 - b) / 3, d = (1 + b * w(x * a) / w(E - x * a)) / 3, e = 1 - (f + d));
    e = B(c * e * 3);
    f = B(c * f * 3);
    d = B(c * d * 3);
    return[255 * e, 255 * f, 255 * d];
  };
  v = function() {
    var a, b, c, d, f, e;
    b = F(arguments);
    a = b[0];
    f = b[1];
    c = b[2];
    if (0 === f) {
      d = b = a = 255 * c;
    } else {
      d = [0, 0, 0];
      b = [0, 0, 0];
      f = 0.5 > c ? c * (1 + f) : c + f - c * f;
      c = 2 * c - f;
      a /= 360;
      d[0] = a + 1 / 3;
      d[1] = a;
      d[2] = a - 1 / 3;
      for (a = e = 0;2 >= e;a = ++e) {
        0 > d[a] && (d[a] += 1), 1 < d[a] && (d[a] -= 1), b[a] = 1 > 6 * d[a] ? c + 6 * (f - c) * d[a] : 1 > 2 * d[a] ? f : 2 > 3 * d[a] ? c + (f - c) * (2 / 3 - d[a]) * 6 : c;
      }
      a = [Math.round(255 * b[0]), Math.round(255 * b[1]), Math.round(255 * b[2])];
      d = a[0];
      b = a[1];
      a = a[2];
    }
    return[d, b, a];
  };
  y = function() {
    var a, b, c, d, e, g, h, r, m;
    e = F(arguments);
    d = e[0];
    r = e[1];
    m = e[2];
    m *= 255;
    if (0 === r) {
      h = c = a = m;
    } else {
      switch(360 === d && (d = 0), 360 < d && (d -= 360), 0 > d && (d += 360), d /= 60, e = Math.floor(d), b = d - e, d = m * (1 - r), g = m * (1 - r * b), r = m * (1 - r * (1 - b)), e) {
        case 0:
          a = [m, r, d];
          h = a[0];
          c = a[1];
          a = a[2];
          break;
        case 1:
          a = [g, m, d];
          h = a[0];
          c = a[1];
          a = a[2];
          break;
        case 2:
          a = [d, m, r];
          h = a[0];
          c = a[1];
          a = a[2];
          break;
        case 3:
          a = [d, g, m];
          h = a[0];
          c = a[1];
          a = a[2];
          break;
        case 4:
          a = [r, d, m];
          h = a[0];
          c = a[1];
          a = a[2];
          break;
        case 5:
          a = [m, d, g], h = a[0], c = a[1], a = a[2];
      }
    }
    h = Math.round(h);
    c = Math.round(c);
    a = Math.round(a);
    return[h, c, a];
  };
  A = function() {
    var a, b, c, d;
    c = F(arguments);
    d = c[0];
    a = c[1];
    b = c[2];
    c = Math.sqrt(a * a + b * b);
    a = Math.atan2(b, a) / Math.PI * 180;
    return[d, c, a];
  };
  l = function(a, b, c) {
    var d, e;
    void 0 !== a && 3 === a.length && (c = a, a = c[0], b = c[1], c = c[2]);
    void 0 !== a && 3 === a.length && (c = a, a = c[0], b = c[1], c = c[2]);
    a = (a + 16) / 116;
    c = a - c / 200;
    e = 0.95047 * J(a + b / 500);
    a = 1 * J(a);
    c = 1.08883 * J(c);
    d = M(3.2404542 * e - 1.5371385 * a - 0.4985314 * c);
    b = M(-0.969266 * e + 1.8760108 * a + 0.041556 * c);
    c = M(0.0556434 * e - 0.2040259 * a + 1.0572252 * c);
    return[B(d, 0, 255), B(b, 0, 255), B(c, 0, 255), 1];
  };
  J = function(a) {
    return 0.206893034 < a ? a * a * a : (a - 4 / 29) / 7.787037;
  };
  M = function(a) {
    return Math.round(255 * (0.00304 >= a ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - 0.055));
  };
  G = function() {
    var a, b, c;
    b = F(arguments);
    c = b[0];
    a = b[1];
    b = b[2];
    b = b * Math.PI / 180;
    return[c, Math.cos(b) * a, Math.sin(b) * a];
  };
  H = function(a, b, c) {
    a = G(a, b, c);
    b = a[0];
    c = a[1];
    a = a[2];
    a = l(b, c, a);
    c = a[0];
    b = a[1];
    a = a[2];
    return[B(c, 0, 255), B(b, 0, 255), B(a, 0, 255)];
  };
  D = function(a, b, c) {
    var d;
    d = F(arguments);
    a = d[0];
    b = d[1];
    c = d[2];
    a = C(a);
    b = C(b);
    c = C(c);
    return 0.2126 * a + 0.7152 * b + 0.0722 * c;
  };
  C = function(a) {
    a /= 255;
    return 0.03928 >= a ? a / 12.92 : Math.pow((a + 0.055) / 1.055, 2.4);
  };
  I = function() {
    var a;
    a = F(arguments);
    a = "000000" + (a[0] << 16 | a[1] << 8 | a[2]).toString(16);
    return "#" + a.substr(a.length - 6);
  };
  Q = function() {
    var a, b, c, d, e, g;
    a = F(arguments);
    d = a[0];
    c = a[1];
    b = a[2];
    a = 2 * Math.PI;
    d /= 255;
    c /= 255;
    b /= 255;
    g = Math.min(d, c, b);
    e = (d + c + b) / 3;
    g = 1 - g / e;
    0 === g ? d = 0 : (d = (d - c + (d - b)) / 2 / Math.sqrt((d - c) * (d - c) + (d - b) * (c - b)), d = Math.acos(d), b > c && (d = a - d), d /= a);
    return[360 * d, g, e];
  };
  R = function(a, b, c) {
    var d, e, g, h, r;
    void 0 !== a && 3 <= a.length && (c = a, a = c[0], b = c[1], c = c[2]);
    a /= 255;
    b /= 255;
    c /= 255;
    h = Math.min(a, b, c);
    g = Math.max(a, b, c);
    e = (g + h) / 2;
    g === h ? (r = 0, d = Number.NaN) : r = 0.5 > e ? (g - h) / (g + h) : (g - h) / (2 - g - h);
    a === g ? d = (b - c) / (g - h) : b === g ? d = 2 + (c - a) / (g - h) : c === g && (d = 4 + (a - b) / (g - h));
    d *= 60;
    0 > d && (d += 360);
    return[d, r, e];
  };
  S = function() {
    var a, b, c, d, e, g, h;
    a = F(arguments);
    g = a[0];
    c = a[1];
    a = a[2];
    b = Math.min(g, c, a);
    e = Math.max(g, c, a);
    b = e - b;
    0 === e ? (d = Number.NaN, h = 0) : (h = b / e, g === e && (d = (c - a) / b), c === e && (d = 2 + (a - g) / b), a === e && (d = 4 + (g - c) / b), d *= 60, 0 > d && (d += 360));
    return[d, h, e / 255];
  };
  O = function() {
    var a, b, c, d, e;
    d = F(arguments);
    c = d[0];
    b = d[1];
    a = d[2];
    c = K(c);
    b = K(b);
    a = K(a);
    d = L((0.4124564 * c + 0.3575761 * b + 0.1804375 * a) / 0.95047);
    e = L((0.2126729 * c + 0.7151522 * b + 0.072175 * a) / 1);
    b = L((0.0193339 * c + 0.119192 * b + 0.9503041 * a) / 1.08883);
    return[116 * e - 16, 500 * (d - e), 200 * (e - b)];
  };
  K = function(a) {
    return 0.04045 >= (a /= 255) ? a / 12.92 : Math.pow((a + 0.055) / 1.055, 2.4);
  };
  L = function(a) {
    return 0.008856 < a ? Math.pow(a, 1 / 3) : 7.787037 * a + 4 / 29;
  };
  T = function() {
    var a, b, c;
    b = F(arguments);
    c = b[0];
    a = b[1];
    b = b[2];
    b = O(c, a, b);
    c = b[0];
    a = b[1];
    b = b[2];
    return A(c, a, b);
  };
  e.scale = function(a, b) {
    var c, d, f, g, h, r, m, p, s, n, k, u, l, v, t, x, q, w, y;
    v = "rgb";
    t = e("#ccc");
    y = 0;
    k = [0, 1];
    s = [];
    q = !1;
    w = [];
    l = 0;
    u = 1;
    n = !1;
    x = 0;
    p = {};
    h = function(a, b) {
      var c, d, f, p;
      null == a && (a = ["#ddd", "#222"]);
      null != a && "string" === z(a) && null != (null != (c = e.brewer) ? c[a] : void 0) && (a = e.brewer[a]);
      if ("array" === z(a)) {
        a = a.slice(0);
        c = f = 0;
        for (p = a.length - 1;0 <= p ? f <= p : f >= p;c = 0 <= p ? ++f : --f) {
          d = a[c], "string" === z(d) && (a[c] = e(d));
        }
        if (null != b) {
          w = b;
        } else {
          for (w = [], c = d = 0, f = a.length - 1;0 <= f ? d <= f : d >= f;c = 0 <= f ? ++d : --d) {
            w.push(c / (a.length - 1));
          }
        }
      }
      g();
      return s = a;
    };
    r = function(a) {
      null == a && (a = []);
      k = a;
      l = a[0];
      u = a[a.length - 1];
      g();
      return 2 === a.length ? x = 0 : x = a.length - 1;
    };
    d = function(a) {
      var b, c;
      if (null != k) {
        c = k.length - 1;
        for (b = 0;b < c && a >= k[b];) {
          b++;
        }
        return b - 1;
      }
      return 0;
    };
    m = function(a) {
      return a;
    };
    f = function(a, b) {
      var c, f, g, h, n, r, q;
      null == b && (b = !1);
      if (isNaN(a)) {
        return t;
      }
      b ? n = a : 2 < k.length ? (c = d(a), n = c / (x - 1)) : (n = (a - l) / (u - l), n = Math.min(1, Math.max(0, n)));
      b || (n = m(n));
      g = Math.floor(1E4 * n);
      if (p[g]) {
        f = p[g];
      } else {
        if ("array" === z(s)) {
          for (c = r = 0, q = w.length - 1;0 <= q ? r <= q : r >= q;c = 0 <= q ? ++r : --r) {
            h = w[c];
            if (n <= h) {
              f = s[c];
              break;
            }
            if (n >= h && c === w.length - 1) {
              f = s[c];
              break;
            }
            if (n > h && n < w[c + 1]) {
              n = (n - h) / (w[c + 1] - h);
              f = e.interpolate(s[c], s[c + 1], n, v);
              break;
            }
          }
        } else {
          "function" === z(s) && (f = s(n));
        }
        p[g] = f;
      }
      return f;
    };
    g = function() {
      return p = {};
    };
    h(a, b);
    c = function(a) {
      a = f(a);
      return q && a[q] ? a[q]() : a;
    };
    c.domain = function(a, b, d, f) {
      var g;
      null == d && (d = "e");
      if (!arguments.length) {
        return k;
      }
      null != b && (g = e.analyze(a, f), a = 0 === b ? [g.min, g.max] : e.limits(g, d, b));
      r(a);
      return c;
    };
    c.mode = function(a) {
      if (!arguments.length) {
        return v;
      }
      v = a;
      g();
      return c;
    };
    c.range = function(a, b) {
      h(a, b);
      return c;
    };
    c.out = function(a) {
      q = a;
      return c;
    };
    c.spread = function(a) {
      if (!arguments.length) {
        return y;
      }
      y = a;
      return c;
    };
    c.correctLightness = function(a) {
      if (!arguments.length) {
        return n;
      }
      n = a;
      g();
      m = n ? function(a) {
        var b, c, d, e, g, p;
        b = f(0, !0).lab()[0];
        c = f(1, !0).lab()[0];
        e = b > c;
        d = f(a, !0).lab()[0];
        b += (c - b) * a;
        d -= b;
        g = 0;
        p = 1;
        for (c = 20;0.01 < Math.abs(d) && 0 < c--;) {
          e && (d *= -1), 0 > d ? (g = a, a += 0.5 * (p - a)) : (p = a, a += 0.5 * (g - a)), d = f(a, !0).lab()[0], d -= b;
        }
        return a;
      } : function(a) {
        return a;
      };
      return c;
    };
    c.colors = function(b) {
      var d, e, f, g;
      null == b && (b = "hex");
      a = [];
      e = [];
      if (2 < k.length) {
        for (d = f = 1, g = k.length;1 <= g ? f < g : f > g;d = 1 <= g ? ++f : --f) {
          e.push(0.5 * (k[d - 1] + k[d]));
        }
      } else {
        e = k;
      }
      f = 0;
      for (g = e.length;f < g;f++) {
        d = e[f], a.push(c(d)[b]());
      }
      return a;
    };
    return c;
  };
  null == e.scales && (e.scales = {});
  e.scales.cool = function() {
    return e.scale([e.hsl(180, 1, 0.9), e.hsl(250, 0.7, 0.4)]);
  };
  e.scales.hot = function() {
    return e.scale(["#000", "#f00", "#ff0", "#fff"], [0, 0.25, 0.75, 1]).mode("rgb");
  };
  e.analyze = function(a, b, c) {
    var d, f, g, h, k, m;
    g = {min:Number.MAX_VALUE, max:-1 * Number.MAX_VALUE, sum:0, values:[], count:0};
    null == c && (c = function() {
      return!0;
    });
    d = function(a) {
      null == a || isNaN(a) || (g.values.push(a), g.sum += a, a < g.min && (g.min = a), a > g.max && (g.max = a), g.count += 1);
    };
    k = function(a, e) {
      if (c(a, e)) {
        return null != b && "function" === z(b) ? d(b(a)) : null != b && "string" === z(b) || "number" === z(b) ? d(a[b]) : d(a);
      }
    };
    if ("array" === z(a)) {
      for (f = 0, m = a.length;f < m;f++) {
        h = a[f], k(h);
      }
    } else {
      for (f in a) {
        h = a[f], k(h, f);
      }
    }
    g.domain = [g.min, g.max];
    g.limits = function(a, b) {
      return e.limits(g, a, b);
    };
    return g;
  };
  e.limits = function(a, b, c) {
    var d, f, g, h, k, m, p, s, n, u, l, q, v, w, x;
    null == b && (b = "equal");
    null == c && (c = 7);
    "array" === z(a) && (a = e.analyze(a));
    m = a.min;
    h = a.max;
    p = a.values.sort(function(a, b) {
      return a - b;
    });
    a = [];
    "c" === b.substr(0, 1) && (a.push(m), a.push(h));
    if ("e" === b.substr(0, 1)) {
      a.push(m);
      b = p = 1;
      for (d = c - 1;1 <= d ? p <= d : p >= d;b = 1 <= d ? ++p : --p) {
        a.push(m + b / c * (h - m));
      }
      a.push(h);
    } else {
      if ("l" === b.substr(0, 1)) {
        if (0 >= m) {
          throw "Logarithmic scales are only possible for values > 0";
        }
        d = Math.LOG10E * Math.log(m);
        p = Math.LOG10E * Math.log(h);
        a.push(m);
        b = n = 1;
        for (f = c - 1;1 <= f ? n <= f : n >= f;b = 1 <= f ? ++n : --n) {
          a.push(Math.pow(10, d + b / c * (p - d)));
        }
        a.push(h);
      } else {
        if ("q" === b.substr(0, 1)) {
          a.push(m);
          b = d = 1;
          for (n = c - 1;1 <= n ? d <= n : d >= n;b = 1 <= n ? ++d : --d) {
            f = p.length * b / c, b = Math.floor(f), b === f ? a.push(p[b]) : (f -= b, a.push(p[b] * f + p[b + 1] * (1 - f)));
          }
          a.push(h);
        } else {
          if ("k" === b.substr(0, 1)) {
            n = p.length;
            d = Array(n);
            k = Array(c);
            s = !0;
            u = 0;
            g = null;
            g = [];
            g.push(m);
            b = l = 1;
            for (q = c - 1;1 <= q ? l <= q : l >= q;b = 1 <= q ? ++l : --l) {
              g.push(m + b / c * (h - m));
            }
            for (g.push(h);s;) {
              h = b = 0;
              for (m = c - 1;0 <= m ? b <= m : b >= m;h = 0 <= m ? ++b : --b) {
                k[h] = 0;
              }
              b = q = 0;
              for (w = n - 1;0 <= w ? q <= w : q >= w;b = 0 <= w ? ++q : --q) {
                l = p[b];
                s = Number.MAX_VALUE;
                h = v = 0;
                for (x = c - 1;0 <= x ? v <= x : v >= x;h = 0 <= x ? ++v : --v) {
                  m = Math.abs(g[h] - l), m < s && (s = m, f = h);
                }
                k[f]++;
                d[b] = f;
              }
              m = Array(c);
              h = b = 0;
              for (s = c - 1;0 <= s ? b <= s : b >= s;h = 0 <= s ? ++b : --b) {
                m[h] = null;
              }
              b = s = 0;
              for (l = n - 1;0 <= l ? s <= l : s >= l;b = 0 <= l ? ++s : --s) {
                h = d[b], m[h] = null === m[h] ? p[b] : m[h] + p[b];
              }
              h = s = 0;
              for (l = c - 1;0 <= l ? s <= l : s >= l;h = 0 <= l ? ++s : --s) {
                m[h] *= 1 / k[h];
              }
              s = !1;
              h = q = 0;
              for (l = c - 1;0 <= l ? q <= l : q >= l;h = 0 <= l ? ++q : --q) {
                if (m[h] !== g[b]) {
                  s = !0;
                  break;
                }
              }
              g = m;
              u++;
              200 < u && (s = !1);
            }
            f = {};
            h = g = 0;
            for (b = c - 1;0 <= b ? g <= b : g >= b;h = 0 <= b ? ++g : --g) {
              f[h] = [];
            }
            b = g = 0;
            for (n -= 1;0 <= n ? g <= n : g >= n;b = 0 <= n ? ++g : --g) {
              h = d[b], f[h].push(p[b]);
            }
            p = [];
            h = b = 0;
            for (c -= 1;0 <= c ? b <= c : b >= c;h = 0 <= c ? ++b : --b) {
              p.push(f[h][0]), p.push(f[h][f[h].length - 1]);
            }
            p = p.sort(function(a, b) {
              return a - b;
            });
            a.push(p[0]);
            b = d = 1;
            for (c = p.length - 1;d <= c;b = d += 2) {
              isNaN(p[b]) || a.push(p[b]);
            }
          }
        }
      }
    }
    return a;
  };
  e.brewer = {OrRd:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #b30000 #7f0000".split(" "), PuBu:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #045a8d #023858".split(" "), BuPu:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #810f7c #4d004b".split(" "), Oranges:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #a63603 #7f2704".split(" "), BuGn:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #006d2c #00441b".split(" "), YlOrBr:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #993404 #662506".split(" "), 
  YlGn:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #006837 #004529".split(" "), Reds:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #a50f15 #67000d".split(" "), RdPu:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177 #49006a".split(" "), Greens:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #006d2c #00441b".split(" "), YlGnBu:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "), Purples:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #54278f #3f007d".split(" "), 
  GnBu:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #0868ac #084081".split(" "), Greys:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525 #000000".split(" "), YlOrRd:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #bd0026 #800026".split(" "), PuRd:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #980043 #67001f".split(" "), Blues:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #08519c #08306b".split(" "), PuBuGn:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016c59 #014636".split(" "), 
  Spectral:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" "), RdYlGn:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" "), RdBu:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" "), PiYG:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" "), PRGn:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" "), 
  RdYlBu:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" "), BrBG:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" "), RdGy:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" "), PuOr:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" "), Set2:"#66c2a5 #fc8d62 #8da0cb #e78ac3 #a6d854 #ffd92f #e5c494 #b3b3b3".split(" "), 
  Accent:"#7fc97f #beaed4 #fdc086 #ffff99 #386cb0 #f0027f #bf5b17 #666666".split(" "), Set1:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33 #a65628 #f781bf #999999".split(" "), Set3:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9 #bc80bd #ccebc5 #ffed6f".split(" "), Dark2:"#1b9e77 #d95f02 #7570b3 #e7298a #66a61e #e6ab02 #a6761d #666666".split(" "), Paired:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6 #6a3d9a #ffff99 #b15928".split(" "), Pastel2:"#b3e2cd #fdcdac #cbd5e8 #f4cae4 #e6f5c9 #fff2ae #f1e2cc #cccccc".split(" "), 
  Pastel1:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc #e5d8bd #fddaec #f2f2f2".split(" ")};
  e.colors = {indigo:"#4b0082", gold:"#ffd700", hotpink:"#ff69b4", firebrick:"#b22222", indianred:"#cd5c5c", yellow:"#ffff00", mistyrose:"#ffe4e1", darkolivegreen:"#556b2f", olive:"#808000", darkseagreen:"#8fbc8f", pink:"#ffc0cb", tomato:"#ff6347", lightcoral:"#f08080", orangered:"#ff4500", navajowhite:"#ffdead", lime:"#00ff00", palegreen:"#98fb98", darkslategrey:"#2f4f4f", greenyellow:"#adff2f", burlywood:"#deb887", seashell:"#fff5ee", mediumspringgreen:"#00fa9a", fuchsia:"#ff00ff", papayawhip:"#ffefd5", 
  blanchedalmond:"#ffebcd", chartreuse:"#7fff00", dimgray:"#696969", black:"#000000", peachpuff:"#ffdab9", springgreen:"#00ff7f", aquamarine:"#7fffd4", white:"#ffffff", orange:"#ffa500", lightsalmon:"#ffa07a", darkslategray:"#2f4f4f", brown:"#a52a2a", ivory:"#fffff0", dodgerblue:"#1e90ff", peru:"#cd853f", lawngreen:"#7cfc00", chocolate:"#d2691e", crimson:"#dc143c", forestgreen:"#228b22", darkgrey:"#a9a9a9", lightseagreen:"#20b2aa", cyan:"#00ffff", mintcream:"#f5fffa", silver:"#c0c0c0", antiquewhite:"#faebd7", 
  mediumorchid:"#ba55d3", skyblue:"#87ceeb", gray:"#808080", darkturquoise:"#00ced1", goldenrod:"#daa520", darkgreen:"#006400", floralwhite:"#fffaf0", darkviolet:"#9400d3", darkgray:"#a9a9a9", moccasin:"#ffe4b5", saddlebrown:"#8b4513", grey:"#808080", darkslateblue:"#483d8b", lightskyblue:"#87cefa", lightpink:"#ffb6c1", mediumvioletred:"#c71585", slategrey:"#708090", red:"#ff0000", deeppink:"#ff1493", limegreen:"#32cd32", darkmagenta:"#8b008b", palegoldenrod:"#eee8aa", plum:"#dda0dd", turquoise:"#40e0d0", 
  lightgrey:"#d3d3d3", lightgoldenrodyellow:"#fafad2", darkgoldenrod:"#b8860b", lavender:"#e6e6fa", maroon:"#800000", yellowgreen:"#9acd32", sandybrown:"#f4a460", thistle:"#d8bfd8", violet:"#ee82ee", navy:"#000080", magenta:"#ff00ff", dimgrey:"#696969", tan:"#d2b48c", rosybrown:"#bc8f8f", olivedrab:"#6b8e23", blue:"#0000ff", lightblue:"#add8e6", ghostwhite:"#f8f8ff", honeydew:"#f0fff0", cornflowerblue:"#6495ed", slateblue:"#6a5acd", linen:"#faf0e6", darkblue:"#00008b", powderblue:"#b0e0e6", seagreen:"#2e8b57", 
  darkkhaki:"#bdb76b", snow:"#fffafa", sienna:"#a0522d", mediumblue:"#0000cd", royalblue:"#4169e1", lightcyan:"#e0ffff", green:"#008000", mediumpurple:"#9370db", midnightblue:"#191970", cornsilk:"#fff8dc", paleturquoise:"#afeeee", bisque:"#ffe4c4", slategray:"#708090", darkcyan:"#008b8b", khaki:"#f0e68c", wheat:"#f5deb3", teal:"#008080", darkorchid:"#9932cc", deepskyblue:"#00bfff", salmon:"#fa8072", darkred:"#8b0000", steelblue:"#4682b4", palevioletred:"#db7093", lightslategray:"#778899", aliceblue:"#f0f8ff", 
  lightslategrey:"#778899", lightgreen:"#90ee90", orchid:"#da70d6", gainsboro:"#dcdcdc", mediumseagreen:"#3cb371", lightgray:"#d3d3d3", mediumturquoise:"#48d1cc", lemonchiffon:"#fffacd", cadetblue:"#5f9ea0", lightyellow:"#ffffe0", lavenderblush:"#fff0f5", coral:"#ff7f50", purple:"#800080", aqua:"#00ffff", whitesmoke:"#f5f5f5", mediumslateblue:"#7b68ee", darkorange:"#ff8c00", mediumaquamarine:"#66cdaa", darksalmon:"#e9967a", beige:"#f5f5dc", blueviolet:"#8a2be2", azure:"#f0ffff", lightsteelblue:"#b0c4de", 
  oldlace:"#fdf5e6"};
  z = function() {
    var a, b, c, d, e;
    a = {};
    e = "Boolean Number String Function Array Date RegExp Undefined Null".split(" ");
    c = 0;
    for (d = e.length;c < d;c++) {
      b = e[c], a["[object " + b + "]"] = b.toLowerCase();
    }
    return function(b) {
      b = Object.prototype.toString.call(b);
      return a[b] || "object";
    };
  }();
  B = function(a, b, c) {
    null == b && (b = 0);
    null == c && (c = 1);
    a < b && (a = b);
    a > c && (a = c);
    return a;
  };
  F = function(a) {
    return 3 <= a.length ? a : a[0];
  };
  x = 2 * Math.PI;
  E = Math.PI / 3;
  w = Math.cos;
  k = function(a) {
    var b, c, d, f, g, h, l, m;
    a = function() {
      var b, c, d;
      d = [];
      b = 0;
      for (c = a.length;b < c;b++) {
        f = a[b], d.push(e(f));
      }
      return d;
    }();
    2 === a.length ? (b = function() {
      var b, c, d;
      d = [];
      b = 0;
      for (c = a.length;b < c;b++) {
        f = a[b], d.push(f.lab());
      }
      return d;
    }(), g = b[0], h = b[1], b = function(a) {
      var b, c, d;
      d = [];
      for (b = c = 0;2 >= c;b = ++c) {
        d.push(g[b] + a * (h[b] - g[b]));
      }
      return e.lab.apply(e, d);
    }) : 3 === a.length ? (b = function() {
      var b, c, d;
      d = [];
      b = 0;
      for (c = a.length;b < c;b++) {
        f = a[b], d.push(f.lab());
      }
      return d;
    }(), g = b[0], h = b[1], l = b[2], b = function(a) {
      var b, c, d;
      d = [];
      for (b = c = 0;2 >= c;b = ++c) {
        d.push((1 - a) * (1 - a) * g[b] + 2 * (1 - a) * a * h[b] + a * a * l[b]);
      }
      return e.lab.apply(e, d);
    }) : 4 === a.length ? (b = function() {
      var b, c, d;
      d = [];
      b = 0;
      for (c = a.length;b < c;b++) {
        f = a[b], d.push(f.lab());
      }
      return d;
    }(), g = b[0], h = b[1], l = b[2], m = b[3], b = function(a) {
      var b, c, d;
      d = [];
      for (b = c = 0;2 >= c;b = ++c) {
        d.push((1 - a) * (1 - a) * (1 - a) * g[b] + 3 * (1 - a) * (1 - a) * a * h[b] + 3 * (1 - a) * a * a * l[b] + a * a * a * m[b]);
      }
      return e.lab.apply(e, d);
    }) : 5 === a.length && (c = k(a.slice(0, 3)), d = k(a.slice(2, 5)), b = function(a) {
      return 0.5 > a ? c(2 * a) : d(2 * (a - 0.5));
    });
    return b;
  };
  e.interpolate.bezier = k;
}).call(this);
var picolor;
(function(t) {
  t.lightSpectrum = [chroma.hex(chroma.brewer.Paired[0]), chroma.hex(chroma.brewer.Paired[2]), chroma.hex(chroma.brewer.Paired[10]), chroma.hex(chroma.brewer.Paired[6]), chroma.hex(chroma.brewer.Paired[4]), chroma.hex(chroma.brewer.Paired[8])];
  t.darkSpectrum = [chroma.hex(chroma.brewer.Paired[1]), chroma.hex(chroma.brewer.Paired[3]), chroma.hex(chroma.brewer.Paired[11]), chroma.hex(chroma.brewer.Paired[7]), chroma.hex(chroma.brewer.Paired[5]), chroma.hex(chroma.brewer.Paired[9])];
  t.whiteToBlackInterpolator = chroma.interpolate.bezier(["white", "black"]);
  var E = function() {
    function x(k, e) {
      var q = this;
      this._lch = chroma.hex("#ffffff").lch();
      this._alpha = 255;
      this._showBasicSelector = !0;
      this._showLabels = this._showColorWheel = !1;
      this.height = this.width = 298;
      this.cx = this.width / 2;
      this.cy = this.height / 2;
      this.radius = 119;
      e && this.setOptions(e);
      this.containerDivID = k;
      this.colorBandDivID = this.containerDivID + "-colorband";
      this.blackToWhiteBandDivID = this.containerDivID + "-blacktowhiteband";
      this.colorWheelDivID = this.containerDivID + "-colorwheel";
      $("#" + this.containerDivID).on("mouseup", "#" + this.colorWheelDivID, this.onColorWheelMouseUp.bind(this));
      $("#" + this.containerDivID).on("mousedown", "#" + this.colorWheelDivID, function(e) {
        q.onColorWheelMouseDown(e);
        q.onColorWheelMouseMove(e);
      });
      $("#" + this.containerDivID).on("mousemove", "#" + this.colorWheelDivID, this.onColorWheelMouseMove.bind(this));
    }
    x.prototype.setOptions = function(k) {
      k.color && (this._lch = k.color.lch(), this._alpha = k.color.alpha());
      this._showColorWheel = !!k.showColorWheel;
      this._showLabels = !!k.showLabels;
      this._showBasicSelector = !!k.showColorWheel;
    };
    x.prototype.onColorWheelMouseDown = function(k) {
      var e = k.pageX - this.offset.left;
      k = k.pageY - this.offset.top;
      var q = e - this.cx, w = k - this.cy;
      Math.sqrt(q * q + w * w) < this.radius && (this.isDraggingColor = !0);
      30 <= k && k <= this.height - 30 && -2 <= e && 24 >= e && (this.isDraggingLightness = !0);
      30 <= k && k <= this.height - 30 && e >= this.width - 25 && e <= this.width + 1 && (this.isDraggingAlpha = !0);
    };
    x.prototype.onColorWheelMouseMove = function(k) {
      if (this.isDraggingAlpha || this.isDraggingColor || this.isDraggingLightness) {
        var e = k.pageX - this.offset.left;
        k = k.pageY - this.offset.top;
        if (this.isDraggingColor) {
          var q = e - this.cx, w = k - this.cy, e = Math.min(this.radius, Math.sqrt(q * q + w * w)), q = 180 * Math.atan2(w, q) / Math.PI;
          this.lch = [this.lch[0], 100 * e / this.radius, q];
        }
        this.isDraggingLightness && (this.lch = [Math.max(0, Math.min(100, 100 - (k - 30) / (this.height - 60) * 100)), this.lch[1], this.lch[2]]);
        this.isDraggingAlpha && (this.alpha = Math.max(0, Math.min(255, 255 - 255 * (k - 30) / (this.height - 60))));
      }
    };
    x.prototype.onColorWheelMouseUp = function(k) {
      this.isDraggingLightness = this.isDraggingColor = this.isDraggingAlpha = !1;
    };
    Object.defineProperty(x.prototype, "lch", {get:function() {
      return this._lch;
    }, set:function(k) {
      0 > k[2] && (k[2] += 360);
      360 <= k[2] && (k[2] -= 360);
      this._lch = k;
      this.draw();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(x.prototype, "alpha", {get:function() {
      return this._alpha;
    }, set:function(k) {
      this._alpha = k;
      this.draw();
    }, enumerable:!0, configurable:!0});
    x.prototype.getColor = function() {
      return chroma.lch(this.lch[0], this.lch[1], this.lch[2]);
    };
    Object.defineProperty(x.prototype, "showColorWheel", {get:function() {
      return this._showColorWheel;
    }, set:function(k) {
      this._showColorWheel = k;
      this.draw();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(x.prototype, "showLabels", {get:function() {
      return this._showLabels;
    }, set:function(k) {
      this._showLabels = k;
      this.draw();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(x.prototype, "showBasicSelector", {get:function() {
      return this._showBasicSelector;
    }, set:function(k) {
      this._showBasicSelector = k;
      this.draw();
    }, enumerable:!0, configurable:!0});
    x.prototype.draw = function() {
      this.drawContainerStructure();
      $("#" + this.containerDivID).off("click");
      this.showBasicSelector && this.drawBasicSelector();
      this.showColorWheel && this.drawColorWheel();
    };
    x.prototype.drawContainerStructure = function() {
      var k = '<div class="picolor-container">\t<div class="picolor-top-container">\t\t<div id="' + this.colorBandDivID + '-0"></div>\t\t<div id="' + this.colorBandDivID + '-1"></div>\t\t<div id="' + this.blackToWhiteBandDivID + '" style="margin-top: 6px"></div>\t</div>\t<div class="picolor-bottom-container">\t\t<canvas id="' + this.colorWheelDivID + '" class="picolor-wheel"></canvas>\t</div></div>', e = $("#" + this.containerDivID);
      e.empty();
      e.append(k);
    };
    x.prototype.drawBasicSelector = function() {
      for (var k = this, e = function(e, q) {
        for (var u = "", v = 0;v < e.length;v++) {
          var w = q + "-" + v, u = u + ('<div id="' + w + '" class="picolor-box-container');
          k.getColor().css() === e[v].css() && (u += " picolor-box-container-selected");
          u += '">';
          u += '\t<div class="picolor-box" style="background-color:' + e[v].css() + '"></div>';
          u += "</div>";
          $("#" + k.containerDivID).on("click", "#" + w, e[v].lch(), function(e) {
            k.lch = e.data;
          });
        }
        $("#" + q).append(u);
      }, q = [], w = 0;6 > w;w++) {
        q.push(t.whiteToBlackInterpolator(0.2 * w));
      }
      e(t.lightSpectrum, this.colorBandDivID + "-0");
      e(t.darkSpectrum, this.colorBandDivID + "-1");
      e(q, this.blackToWhiteBandDivID);
    };
    x.prototype.drawColorWheel = function() {
      this.offset = $("#" + this.colorWheelDivID).offset();
      var k = document.getElementById(this.colorWheelDivID), e = k.getContext("2d"), q, w, x = Number.MAX_VALUE;
      k.width = this.width;
      k.height = this.height;
      for (var k = e.createImageData(this.width, this.height), t = k.data, u = 0, v = 0;v < this.height;v++) {
        for (var y = 0;y < this.width;y++, u += 4) {
          var A = y - this.cx, l = v - this.cy, E = Math.sqrt(A * A + l * l);
          if (E < this.radius + 0.5) {
            l = 180 * Math.atan2(l, A) / Math.PI;
            0 > l && (l += 360);
            360 < l && (l -= 360);
            var G = 100 * E / this.radius, A = chroma.lch2rgb(this.lch[0], G, l), l = Math.sqrt(Math.pow(G - this.lch[1], 2) + Math.pow(l - this.lch[2], 2));
            l < x && (x = l, q = y, w = v);
            var l = this.alpha, G = A[0], H = A[1], B = A[2], D = 0 == Math.floor(y / 5) % 2, C = 0 == Math.floor(v / 5) % 2, I = D && !C || !D && C ? 250 : 200, C = D = I;
            t[u] = G * l / 255 + D * (1 - l / 255);
            t[u + 1] = H * l / 255 + C * (1 - l / 255);
            t[u + 2] = B * l / 255 + I * (1 - l / 255);
            t[u + 3] = 255 * Math.max(0, this.radius - E);
          }
        }
      }
      for (v = u = 0;v < this.height;v++) {
        for (y = 0;y < this.width;y++, u += 4) {
          30 > v || v > this.height - 30 || 2 > y || 15 < y || (A = chroma.lch2rgb(100 - 100 * (v - 30) / (this.height - 60), this.lch[1], this.lch[2]), t[u] = A[0], t[u + 1] = A[1], t[u + 2] = A[2], t[u + 3] = 255);
        }
      }
      u = 0;
      A = chroma.lch2rgb(this.lch[0], this.lch[1], this.lch[2]);
      for (v = 0;v < this.height;v++) {
        for (y = 0;y < this.width;y++, u += 4) {
          30 > v || v > this.height - 30 || y < this.width - 16 || y > this.width - 3 || (l = 255 - 255 * (v - 30) / (this.height - 60), G = A[0], H = A[1], B = A[2], D = 0 == Math.floor(y / 5) % 2, C = 0 == Math.floor(v / 5) % 2, C = D = I = D && !C || !D && C ? 250 : 200, t[u] = G * l / 255 + D * (1 - l / 255), t[u + 1] = H * l / 255 + C * (1 - l / 255), t[u + 2] = B * l / 255 + I * (1 - l / 255), t[u + 3] = 255);
        }
      }
      e.putImageData(k, 0, 0);
      e.beginPath();
      e.lineWidth = 2;
      e.strokeStyle = 50 < this.lch[0] ? "#0f0f0f" : "#efefef";
      e.arc(q, w, 3, 0, 2 * Math.PI, !1);
      e.stroke();
      e.beginPath();
      q = Math.min(this.height - 35, 30 + (100 - this.lch[0]) / 100 * (this.height - 60));
      e.rect(1, q, 16, 5);
      e.stroke();
      e.beginPath();
      128 > this.alpha && (e.strokeStyle = "#0f0f0f");
      q = Math.min(this.height - 35, 30 + (1 - this.alpha / 255) * (this.height - 60));
      e.rect(this.width - 17, q, 16, 5);
      e.stroke();
      this.showLabels && (e.fillStyle = "#818181", e.font = "10px sans-serif", e.fillText("Dark", 20, this.height - 30), e.textBaseline = "top", e.fillText("Light", 20, 30), e.textAlign = "end", e.fillText("Opaque", this.width - 21, 30), e.textBaseline = "bottom", e.fillText("Transparent", this.width - 21, this.height - 30));
    };
    return x;
  }();
  t.SingleColor = E;
  E = function() {
    return function(t) {
      this.containerDivID = t;
    };
  }();
  t.Palette = E;
})(picolor || (picolor = {}));

