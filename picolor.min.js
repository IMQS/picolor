var picolor;
(function(n) {
  n.lightSpectrum = [chroma.hex(chroma.brewer.Paired[0]), chroma.hex(chroma.brewer.Paired[2]), chroma.hex(chroma.brewer.Paired[10]), chroma.hex(chroma.brewer.Paired[6]), chroma.hex(chroma.brewer.Paired[4]), chroma.hex(chroma.brewer.Paired[8])];
  n.darkSpectrum = [chroma.hex(chroma.brewer.Paired[1]), chroma.hex(chroma.brewer.Paired[3]), chroma.hex(chroma.brewer.Paired[11]), chroma.hex(chroma.brewer.Paired[7]), chroma.hex(chroma.brewer.Paired[5]), chroma.hex(chroma.brewer.Paired[9])];
  n.whiteToBlackInterpolator = chroma.scale(["white", "black"]).correctLightness(!0);
  var q = function() {
    function b(a, d) {
      this._lch = n.whiteToBlackInterpolator(0.4).lch();
      this._alpha = 1;
      d && this.setOptions(d);
      this.containerDivID = a;
      this.colorBandDivID = this.containerDivID + "-colorband";
      this.blackToWhiteBandDivID = this.containerDivID + "-blacktowhiteband";
      var c = '<div>\t<div id="' + this.colorBandDivID + '-0"></div>\t<div id="' + this.colorBandDivID + '-1"></div>\t<div id="' + this.blackToWhiteBandDivID + '" style="margin-top: 6px"></div></div>', h = $("#" + this.containerDivID);
      h.empty();
      h.append(c);
    }
    b.prototype.setOptions = function(a) {
      a.color && (this._lch = a.color.lch(), this._alpha = a.color.alpha());
    };
    Object.defineProperty(b.prototype, "lch", {get:function() {
      return this._lch;
    }, set:function(a) {
      0 > a[2] && (a[2] += 360);
      360 <= a[2] && (a[2] -= 360);
      this._lch = a;
      this.draw();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "hex", {get:function() {
      return chroma.lch(this.lch[0], this.lch[1], this.lch[2]).hex();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "color", {get:function() {
      var a = chroma.lch(this.lch[0], this.lch[1], this.lch[2]);
      a.alpha(this._alpha);
      return a;
    }, set:function(a) {
      this._lch = a.lch();
      this._alpha = a.alpha();
      this.draw();
    }, enumerable:!0, configurable:!0});
    b.prototype.draw = function() {
      var a = this;
      $("#" + this.containerDivID).off("click");
      for (var d = function(a, d) {
        var c = a.rgb(), h = d.rgb(), b = c[0] - h[0], f = c[1] - h[1], c = c[2] - h[2];
        return Math.sqrt(b * b + f * f + c * c);
      }, c = function(c, h) {
        for (var b = "", k = 0;k < c.length;k++) {
          var l = h + "-" + k, b = b + ('<div id="' + l + '" style="width: 38px;height: 24px;cursor: pointer;display: inline-block;padding: 1px;background-color: #E0E0E0;margin: 0px 4px 0px 4px;'), b = 1 > d(a.color, c[k]) ? b + " border: 2px solid black;" : b + " border: 2px solid #E0E0E0;", b = b + '">', b = b + ('\t<div style="height: 24px; background-color:' + c[k].css() + '"></div>'), b = b + "</div>";
          $("#" + a.containerDivID).on("click", "#" + l, c[k], function(d) {
            a.lch = d.data.lch();
            $("#" + a.containerDivID).trigger("oncolorchange", [a.color]);
          });
        }
        $("#" + h).empty();
        $("#" + h).append(b);
      }, h = [], b = 0;6 > b;b++) {
        h.push(n.whiteToBlackInterpolator(0.2 * b));
      }
      c(n.lightSpectrum, this.colorBandDivID + "-0");
      c(n.darkSpectrum, this.colorBandDivID + "-1");
      c(h, this.blackToWhiteBandDivID);
    };
    return b;
  }();
  n.BasicPicker = q;
})(picolor || (picolor = {}));
(function(n) {
  var q = function() {
    function b(a, d) {
      this.containerDivID = a;
      this.blueRange = [chroma.hex("#deebf7"), chroma.hex("#08306b")];
      this.orangeRange = [chroma.hex("#fee6ce"), chroma.hex("#7f2704")];
      this.greenRange = [chroma.hex("#e5f5e0"), chroma.hex("#00441b")];
      this.grayRange = [chroma.hex("#d9d9d9"), chroma.hex("#000000")];
      this.brownWhiteRange = [chroma.hex("#543005"), chroma.hex("#f5f5f5")];
      this.whiteSeagreenRange = [chroma.hex("#f5f5f5"), chroma.hex("#003c30")];
      this.redYellowRange = [chroma.hex("#a50026"), chroma.hex("#ffffbf")];
      this.yellowPurpleRange = [chroma.hex("#ffffbf"), chroma.hex("#313695")];
      this.qualitativePaletteCount = 1;
      this.brewerPairedRanges = [[chroma.hex(chroma.brewer.Paired[0]), chroma.hex(chroma.brewer.Paired[1])], [chroma.hex(chroma.brewer.Paired[2]), chroma.hex(chroma.brewer.Paired[3])], [chroma.hex(chroma.brewer.Paired[4]), chroma.hex(chroma.brewer.Paired[5])], [chroma.hex(chroma.brewer.Paired[6]), chroma.hex(chroma.brewer.Paired[7])], [chroma.hex(chroma.brewer.Paired[8]), chroma.hex(chroma.brewer.Paired[9])], [chroma.hex(chroma.brewer.Paired[10]), chroma.hex(chroma.brewer.Paired[11])]];
      this.pad = this.margin = 10;
      this.w = this.h = 33;
      this.selectedPalIdx = 0;
      this.isDraggingLightness = !1;
      this.containerDivID = a;
      this.paletteCanvasDivID = this.containerDivID + "-canvas";
      d && this.setOptions(d);
      var c = '<div style="background-color: #E0E0E0; padding 5px; cursor: pointer;">\t<canvas id="' + this.paletteCanvasDivID + '"></canvas></div>', b = $("#" + this.containerDivID);
      b.empty();
      b.append(c);
      $("#" + this.paletteCanvasDivID).click(this.setPalette.bind(this));
    }
    b.prototype.generateScale = function(a) {
      return chroma.scale([a[0].hex(), a[1].hex()]).correctLightness(!0);
    };
    Object.defineProperty(b.prototype, "sequentialPalettes", {get:function() {
      var a = this.generateScale(this.blueRange), d = this.generateScale(this.orangeRange), c = this.generateScale(this.greenRange);
      return[this.generateScale(this.grayRange), a, c, d];
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "divergentPalettes", {get:function() {
      chroma.scale([this.brownWhiteRange[0].hex(), this.brownWhiteRange[1].hex()]).correctLightness(!0);
      chroma.scale([this.whiteSeagreenRange[0].hex(), this.whiteSeagreenRange[1].hex()]).correctLightness(!0);
      chroma.scale([this.redYellowRange[0].hex(), this.redYellowRange[1].hex()]).correctLightness(!0);
      chroma.scale([this.yellowPurpleRange[0].hex(), this.yellowPurpleRange[1].hex()]).correctLightness(!0);
      return[[this.generateScale(this.brownWhiteRange), this.generateScale(this.whiteSeagreenRange)], [this.generateScale(this.redYellowRange), this.generateScale(this.yellowPurpleRange)]];
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "brewerPairedScales", {get:function() {
      for (var a = [], d = 0;d < this.brewerPairedRanges.length;d++) {
        var c = this.generateScale(this.brewerPairedRanges[d]);
        a.push(c);
      }
      return a;
    }, enumerable:!0, configurable:!0});
    b.prototype.setPalette = function(a) {
      var d = this.sequentialPalettes.length + this.divergentPalettes.length + this.qualitativePaletteCount;
      this.selectedPalIdx = Math.floor((a.pageX - this.offset.left) / ((2 * this.margin + this.w * d + this.pad * (d - 1)) / d));
      $("#" + this.containerDivID).trigger("oncolorchange", [this.palette]);
      this.draw();
    };
    b.prototype.setOptions = function(a) {
      a.categoryCount && 1 < a.categoryCount && (this._categoryCount = a.categoryCount);
    };
    Object.defineProperty(b.prototype, "palette", {get:function() {
      for (var a = [], d = this.paletteMatrix()[this.selectedPalIdx], c = 0;c < d.length;c++) {
        a.push(d[c].hex());
      }
      return a;
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "categoryCount", {get:function() {
      return this._categoryCount;
    }, set:function(a) {
      this._categoryCount = a;
      this.draw();
    }, enumerable:!0, configurable:!0});
    b.prototype.paletteMatrix = function() {
      for (var a = [], d = this.categoryCount, c = 0;c < this.sequentialPalettes.length;c++) {
        for (var b = [], l = this.sequentialPalettes[c], g = 0;g < d;g++) {
          var e = g / (d - 1);
          b.push(l(e));
        }
        a.push(b);
      }
      for (c = 0;c < this.divergentPalettes.length;c++) {
        for (var b = [], l = this.divergentPalettes[c][0], m = this.divergentPalettes[c][1], g = 0;g < d;g++) {
          e = g / (d - 1), e = 0.5 >= e ? l(2 * e) : m(2 * (e - 0.5)), b.push(e);
        }
        a.push(b);
      }
      b = [];
      e = 2;
      2 * this.brewerPairedScales.length < d && (e = Math.ceil(d / this.brewerPairedScales.length));
      for (c = 0;c < this.brewerPairedScales.length && b.length < d;c++) {
        for (l = this.brewerPairedScales[c], g = 0;g < e && b.length < d;g++) {
          b.push(l(g / (e - 1)));
        }
      }
      a.push(b);
      return a;
    };
    b.prototype.draw = function() {
      this.offset = $("#" + this.paletteCanvasDivID).offset();
      var a = document.getElementById(this.paletteCanvasDivID), d = a.getContext("2d"), c = this.categoryCount, b = this.sequentialPalettes.length + this.divergentPalettes.length + this.qualitativePaletteCount;
      a.width = 2 * this.margin + this.w * b + this.pad * (b - 1);
      a.height = 2 * this.margin + this.h * c;
      a = this.paletteMatrix();
      for (b = 0;b < a.length;b++) {
        for (var l = a[b], g = 0;g < l.length;g++) {
          d.fillStyle = l[g].hex(), d.fillRect(this.margin + b * (this.w + this.pad), this.margin + g * this.h, this.w, this.h);
        }
      }
      d.strokeStyle = "black";
      d.lineWidth = 2;
      d.strokeRect(this.margin - 2 + this.selectedPalIdx * (this.w + this.pad), this.margin - 2, this.w + 4, this.h * c + 4);
    };
    return b;
  }();
  n.Palette = q;
})(picolor || (picolor = {}));
(function(n) {
  var q = function() {
    function b(a, d) {
      var b = this;
      this._lch = n.whiteToBlackInterpolator(0.4).lch();
      this._alpha = 1;
      this.height = this.width = 298;
      this.cx = this.width / 2;
      this.cy = this.height / 2;
      this.radius = 119;
      d && this.setOptions(d);
      this.containerDivID = a;
      this.colorWheelDivID = this.containerDivID + "-colorwheel";
      var h = '<div style="background-color: #E0E0E0; padding 5px">\t<canvas id="' + this.colorWheelDivID + '"></canvas></div>', l = $("#" + this.containerDivID);
      l.empty();
      l.append(h);
      $("#" + this.colorWheelDivID).mouseleave(this.setWheelDragStateOff.bind(this));
      $("#" + this.colorWheelDivID).mouseup(this.setWheelDragStateOff.bind(this));
      $("#" + this.colorWheelDivID).mousedown(function(a) {
        b.setWheelDragStateOn(a);
        b.setWheelColor(a);
      });
      $("#" + this.colorWheelDivID).mousemove(function(a) {
        b.setCursor(a);
        b.setWheelColor(a);
      });
    }
    b.prototype.setOptions = function(a) {
      a.color && (this._lch = a.color.lch(), this._alpha = a.color.alpha());
    };
    b.prototype.setWheelDragStateOn = function(a) {
      var b = a.pageX - this.offset.left;
      a = a.pageY - this.offset.top;
      var c = b - this.cx, h = a - this.cy;
      Math.sqrt(c * c + h * h) < this.radius && (this.isDraggingColor = !0);
      30 <= a && a <= this.height - 30 && 0 <= b && 18 >= b && (this.isDraggingLightness = !0);
      30 <= a && a <= this.height - 30 && b >= this.width - 19 && b <= this.width && (this.isDraggingAlpha = !0);
    };
    b.prototype.setCursor = function(a) {
      if (!(this.isDraggingAlpha || this.isDraggingColor || this.isDraggingLightness)) {
        var b = a.pageX - this.offset.left;
        a = a.pageY - this.offset.top;
        var c = b - this.cx, h = a - this.cy;
        Math.sqrt(c * c + h * h) < this.radius ? $("#" + this.colorWheelDivID).css("cursor", "crosshair") : 30 <= a && a <= this.height - 30 && 0 <= b && 18 >= b ? $("#" + this.colorWheelDivID).css("cursor", "s-resize") : 30 <= a && a <= this.height - 30 && b >= this.width - 19 && b <= this.width ? $("#" + this.colorWheelDivID).css("cursor", "s-resize") : $("#" + this.colorWheelDivID).css("cursor", "default");
      }
    };
    b.prototype.setWheelColor = function(a) {
      if (this.isDraggingAlpha || this.isDraggingColor || this.isDraggingLightness) {
        var b = a.pageX - this.offset.left;
        a = a.pageY - this.offset.top;
        if (this.isDraggingColor) {
          var c = b - this.cx, h = a - this.cy, b = Math.min(this.radius, Math.sqrt(c * c + h * h)), c = 180 * Math.atan2(h, c) / Math.PI;
          this.lch = [this.lch[0], 100 * b / this.radius, c];
        }
        this.isDraggingLightness && (this.lch = [Math.max(0, Math.min(100, 100 - (a - 30) / (this.height - 60) * 100)), this.lch[1], this.lch[2]]);
        this.isDraggingAlpha && (this.alpha = Math.max(0, Math.min(1, 1 - (a - 30) / (this.height - 60))));
        $("#" + this.containerDivID).trigger("oncolorchange", [this.color]);
      }
    };
    b.prototype.setWheelDragStateOff = function(a) {
      this.isDraggingLightness = this.isDraggingColor = this.isDraggingAlpha = !1;
    };
    Object.defineProperty(b.prototype, "lch", {get:function() {
      return this._lch;
    }, set:function(a) {
      0 > a[2] && (a[2] += 360);
      360 <= a[2] && (a[2] -= 360);
      this._lch = a;
      this.draw();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "hex", {get:function() {
      return chroma.lch(this.lch[0], this.lch[1], this.lch[2]).hex();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "alpha", {get:function() {
      return this._alpha;
    }, set:function(a) {
      this._alpha = a;
      this.draw();
    }, enumerable:!0, configurable:!0});
    Object.defineProperty(b.prototype, "color", {get:function() {
      var a = chroma.lch(this.lch[0], this.lch[1], this.lch[2]);
      a.alpha(this._alpha);
      return a;
    }, set:function(a) {
      this._lch = a.lch();
      this._alpha = a.alpha();
      this.draw();
    }, enumerable:!0, configurable:!0});
    b.prototype.draw = function() {
      this.offset = $("#" + this.colorWheelDivID).offset();
      var a = document.getElementById(this.colorWheelDivID), b = a.getContext("2d"), c, h, l = Number.MAX_VALUE;
      a.width = this.width;
      a.height = this.height;
      for (var a = b.createImageData(this.width, this.height), g = a.data, e = 0, m = 0;m < this.height;m++) {
        for (var k = 0;k < this.width;k++, e += 4) {
          var p = k - this.cx, f = m - this.cy, n = Math.sqrt(p * p + f * f);
          if (n < this.radius + 0.5) {
            f = 180 * Math.atan2(f, p) / Math.PI;
            0 > f && (f += 360);
            360 < f && (f -= 360);
            var t = 100 * n / this.radius, p = chroma.lch2rgb(this.lch[0], t, f), f = Math.sqrt(Math.pow(t - this.lch[1], 2) + Math.pow(f - this.lch[2], 2));
            f < l && (l = f, c = k, h = m);
            var f = this.alpha, t = p[0], q = p[1], v = p[2], r = 0 == Math.floor(k / 5) % 2, s = 0 == Math.floor(m / 5) % 2, u = r && !s || !r && s ? 250 : 200, s = r = u;
            g[e] = t * f + r * (1 - f);
            g[e + 1] = q * f + s * (1 - f);
            g[e + 2] = v * f + u * (1 - f);
            g[e + 3] = 255 * Math.max(0, this.radius - n);
          }
        }
      }
      for (m = e = 0;m < this.height;m++) {
        for (k = 0;k < this.width;k++, e += 4) {
          30 > m || m > this.height - 30 || 2 > k || 15 < k || (p = chroma.lch2rgb(100 - 100 * (m - 30) / (this.height - 60), this.lch[1], this.lch[2]), g[e] = p[0], g[e + 1] = p[1], g[e + 2] = p[2], g[e + 3] = 255);
        }
      }
      e = 0;
      p = chroma.lch2rgb(this.lch[0], this.lch[1], this.lch[2]);
      for (m = 0;m < this.height;m++) {
        for (k = 0;k < this.width;k++, e += 4) {
          30 > m || m > this.height - 30 || k < this.width - 16 || k > this.width - 3 || (f = 1 - (m - 30) / (this.height - 60), t = p[0], q = p[1], v = p[2], r = 0 == Math.floor(k / 5) % 2, s = 0 == Math.floor(m / 5) % 2, s = r = u = r && !s || !r && s ? 250 : 200, g[e] = t * f + r * (1 - f), g[e + 1] = q * f + s * (1 - f), g[e + 2] = v * f + u * (1 - f), g[e + 3] = 255);
        }
      }
      b.putImageData(a, 0, 0);
      b.beginPath();
      b.lineWidth = 1.5;
      b.strokeStyle = 50 < this.lch[0] ? "#2f2f2f" : "#dfdfdf";
      l = 30 + (100 - this.lch[0]) / 100 * (this.height - 60);
      l = Math.max(37, Math.min(this.height - 30 - 6, l));
      b.arc(9, l, 5, 0, 2 * Math.PI, !1);
      b.stroke();
      b.beginPath();
      0.5 > this.alpha && (b.strokeStyle = "#2f2f2f");
      b.arc(c, h, 6, 0, 2 * Math.PI, !1);
      b.stroke();
      b.beginPath();
      c = Math.min(this.height - 35, 30 + (1 - this.alpha) * (this.height - 60));
      c = Math.max(37, Math.min(this.height - 30 - 6, c));
      b.arc(this.width - 9, c, 5, 0, 2 * Math.PI, !1);
      b.stroke();
    };
    return b;
  }();
  n.ColorWheel = q;
})(picolor || (picolor = {}));

